@tailwind base;
@tailwind components;
@tailwind utilities;

/* Import Google Fonts */
@import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Silkscreen:wght@400;700&display=swap');

/* CRT Scanline Overlay */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 9999;
  background: linear-gradient(
    to bottom,
    transparent 50%,
    rgba(0, 0, 0, 0.15) 50%
  );
  background-size: 100% 4px;
  animation: scanline 8s linear infinite;
}

/* CRT Screen Curvature Effect */
body::after {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 9998;
  background: radial-gradient(
    ellipse at center,
    transparent 0%,
    rgba(0, 0, 0, 0.3) 100%
  );
}

/* Base Styles */
body {
  @apply bg-retro-purple-900 text-pixel-white font-pixel overflow-x-hidden;
  line-height: 1.8;
  image-rendering: pixelated;
  -webkit-font-smoothing: none;
  -moz-osx-font-smoothing: grayscale;
}

/* Typography Hierarchy */
h1 {
  @apply text-neon-pink-500 text-2xl md:text-4xl font-pixel tracking-wider mb-4;
  text-shadow:
    2px 2px 0px rgba(0, 0, 0, 0.8),
    0 0 10px rgba(255, 0, 110, 0.5);
}

h2 {
  @apply text-gameboy-green-700 text-xl md:text-2xl font-pixel mb-3;
  text-shadow: 2px 2px 0px rgba(0, 0, 0, 0.8);
}

h3 {
  @apply text-terminal-cyan-500 text-base md:text-lg font-pixel mb-2;
}

p {
  @apply text-sm md:text-base font-silkscreen leading-relaxed;
}

/* Main Container */
main {
  @apply max-w-6xl my-8 mx-auto px-4 md:px-8 relative z-10;
}

/* Links */
a {
  @apply text-neon-pink-400 underline decoration-2 underline-offset-4;
  transition: all 200ms steps(4);
}

a:hover {
  @apply text-neon-pink-300 no-underline;
  text-shadow: 0 0 8px rgba(255, 26, 140, 0.8);
}

/* Retro Navigation */
nav {
  @apply
    border-b-pixel border-neon-pink-500
    flex flex-wrap items-center gap-4 md:gap-6
    my-6 mx-auto
    max-w-7xl
    px-4 md:px-8
    pb-4
    relative z-10;
  box-shadow: 0 4px 0 0 rgba(255, 0, 110, 0.3);
}

nav h1 {
  @apply text-xl md:text-2xl mb-0;
}

nav a {
  @apply
    text-gameboy-green-400
    no-underline
    px-3 py-2
    border-pixel-thin border-transparent
    transition-all duration-retro ease-retro;
}

nav a:hover {
  @apply
    border-neon-pink-500
    bg-retro-purple-800
    text-neon-pink-400;
  box-shadow: 0 0 10px rgba(255, 0, 110, 0.4);
}

/* Pixel Button Styles */
.btn-pixel {
  @apply
    px-6 py-3
    font-pixel text-xs md:text-sm
    border-pixel border-neon-pink-500
    bg-retro-purple-800
    text-neon-pink-400
    transition-all duration-retro ease-retro
    cursor-pointer
    inline-flex items-center gap-2
    relative;
  box-shadow: 4px 4px 0px 0px rgba(0, 0, 0, 0.8);
}

.btn-pixel:hover {
  @apply bg-neon-pink-500 text-pixel-black;
  transform: translate(2px, 2px);
  box-shadow: 2px 2px 0px 0px rgba(0, 0, 0, 0.8);
}

.btn-pixel:active {
  transform: translate(4px, 4px);
  box-shadow: none;
}

/* Pixel Card Base */
.pixel-card {
  @apply
    border-pixel border-gameboy-green-700
    bg-retro-purple-800
    p-6
    transition-all duration-retro-slow ease-retro
    relative
    overflow-hidden;
  box-shadow: 8px 8px 0px 0px rgba(0, 0, 0, 0.8);
}

.pixel-card:hover {
  @apply border-neon-pink-500;
  transform: translate(-4px, -4px);
  box-shadow: 12px 12px 0px 0px rgba(0, 0, 0, 0.8);
}

/* Stat Bar (Health Bar Style) */
.stat-bar {
  @apply
    w-full h-6 md:h-8
    border-pixel-thin border-pixel-white
    bg-pixel-black
    relative
    overflow-hidden;
}

.stat-bar-fill {
  @apply
    h-full
    bg-gradient-to-r from-neon-pink-500 to-terminal-cyan-500
    transition-all duration-1000 ease-retro-slow;
  box-shadow: inset 0 0 10px rgba(255, 255, 255, 0.3);
}

/* Terminal Window */
.terminal {
  @apply
    bg-pixel-black
    border-pixel border-gameboy-green-700
    p-4
    font-silkscreen text-sm
    text-gameboy-green-400;
  box-shadow:
    8px 8px 0px 0px rgba(0, 0, 0, 0.8),
    inset 0 0 20px rgba(139, 172, 15, 0.2);
}

.terminal-cursor {
  @apply inline-block w-2 h-4 bg-gameboy-green-400 ml-1 animate-blink;
}

/* Utility Classes */
.pixel-border-top {
  border-top: 4px solid;
  border-image: repeating-linear-gradient(
    90deg,
    currentColor 0,
    currentColor 8px,
    transparent 8px,
    transparent 16px
  ) 4;
}

.text-glitch {
  @apply animate-glitch;
}

/* Custom Pixel Hand Cursor */
.cursor-pixel-hand {
  cursor: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24'%3E%3Cpath fill='%23fff' stroke='%23000' stroke-width='1' d='M8 2h2v4h2V2h2v6h2V4h2v8c0 4-2 6-6 8h-4c-2-1-4-3-4-6V6h2v4h2V2z'/%3E%3C/svg%3E") 6 0, pointer;
}

/* Neon Glow Border Effect */
.neon-glow-border {
  box-shadow:
    8px 8px 0px 0px rgba(0, 0, 0, 0.8),
    0 0 10px rgba(255, 0, 110, 0.6),
    0 0 20px rgba(255, 0, 110, 0.4),
    0 0 30px rgba(255, 0, 110, 0.2) !important;
  border-color: #ff006e !important;
  transition: box-shadow 0.3s ease, border-color 0.3s ease;
}

/* Quest Card Link Reset (remove default link styles) */
.quest-card-link {
  @apply no-underline;
  color: inherit;
}

.quest-card-link:hover {
  @apply no-underline;
  text-shadow: none;
}

/* Pill-shaped Execute Button */
.btn-execute {
  @apply
    bg-gameboy-green-700
    text-pixel-black
    px-4 py-1.5
    text-[10px]
    font-pixel
    flex items-center gap-1
    rounded-lg
    border-2 border-gameboy-green-900;
  box-shadow: 2px 2px 0px 0px rgba(0, 0, 0, 0.5);
  transition: all 150ms ease-out;
}

/* Button Blink Animation on Card Hover */
@keyframes execute-blink {
  0%, 100% {
    background-color: #8bac0f;
    color: #0a0a0a;
  }
  50% {
    background-color: #fafafa;
    color: #0a0a0a;
  }
}

.group:hover .btn-execute {
  animation: execute-blink 0.4s steps(2, end) infinite;
  box-shadow: 0 0 10px rgba(139, 172, 15, 0.8);
}

/* Level Warp Flash */
.level-warp-flash {
  position: fixed;
  inset: 0;
  background-color: #fafafa;
  z-index: 10000;
  pointer-events: none;
  mix-blend-mode: screen;
}

/* Parallax Background Layers */
.parallax-layer-far {
  @apply absolute inset-0;
  background-image:
    radial-gradient(2px 2px at 20% 30%, rgba(255, 0, 110, 0.5), transparent),
    radial-gradient(2px 2px at 60% 70%, rgba(139, 172, 15, 0.5), transparent),
    radial-gradient(1px 1px at 50% 50%, rgba(0, 255, 255, 0.5), transparent),
    radial-gradient(2px 2px at 80% 20%, rgba(255, 0, 110, 0.4), transparent),
    radial-gradient(1px 1px at 30% 80%, rgba(0, 255, 255, 0.4), transparent);
  background-size: 200px 200px, 300px 300px, 250px 250px, 350px 350px, 180px 180px;
  background-position: 0 0, 100px 100px, 50px 50px, 150px 50px, 75px 125px;
  animation: float-stars 30s linear infinite;
  will-change: transform;
}

.parallax-layer-mid {
  @apply absolute inset-0;
  background-image:
    linear-gradient(90deg, transparent 0%, rgba(255, 0, 110, 0.15) 50%, transparent 100%),
    linear-gradient(90deg, transparent 0%, rgba(139, 172, 15, 0.1) 50%, transparent 100%);
  background-size: 400px 100px, 500px 80px;
  background-position: 0 20%, 200px 60%;
  animation: float-islands 20s ease-in-out infinite;
  will-change: transform;
}

.parallax-layer-near {
  @apply absolute inset-0;
  background-image:
    repeating-linear-gradient(
      90deg,
      transparent,
      transparent 50px,
      rgba(139, 172, 15, 0.08) 50px,
      rgba(139, 172, 15, 0.08) 52px
    ),
    repeating-linear-gradient(
      0deg,
      transparent,
      transparent 50px,
      rgba(0, 255, 255, 0.05) 50px,
      rgba(0, 255, 255, 0.05) 52px
    );
  animation: scroll-grid 15s linear infinite;
  will-change: transform;
}

@keyframes float-stars {
  from {
    background-position: 0 0, 100px 100px, 50px 50px, 150px 50px, 75px 125px;
  }
  to {
    background-position: 0 200px, 100px 300px, 50px 250px, 150px 350px, 75px 305px;
  }
}

@keyframes float-islands {
  0%, 100% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(-20px);
  }
}

@keyframes scroll-grid {
  from {
    background-position-x: 0, 0;
  }
  to {
    background-position-x: 50px, 50px;
  }
}

/* Responsive Font Sizing */
@media (max-width: 640px) {
  body {
    font-size: 10px;
  }

  h1 {
    @apply text-xl;
  }

  h2 {
    @apply text-lg;
  }
}

/* Reduced Motion Support */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}
